# Cascade-devin-cursorrules 最佳实践指南

## 工作空间初始化最佳实践

### 1. 关键项目文件

在开始任务前，需要了解并可能需要引用的关键文件：

```markdown
# 核心文档
@Cascade-devin-cursorrules项目部署和使用指南.md  # 项目主要文档
@quick_start_guide.md                           # 快速入门指南
@best_practices.md                              # 最佳实践指南
@workspace_summary.md                           # 工作空间总结

# 配置文件
@.cursorrules                                   # Cursor规则和Scratchpad
@.env                                          # 环境变量配置
@requirements.txt                               # Python依赖

# 工具脚本
@tools/llm_api.py                              # LLM接口
@tools/search_engine.py                         # 搜索引擎
@tools/web_scraper.py                          # 网页爬虫
@tools/screenshot_utils.py                      # 截图工具
```

### 2. .cursorrules 文件配置

在每个新工作空间中，首先确保存在 `.cursorrules` 文件，包含以下关键部分：

```markdown
# Instructions
- 使用中文回复
- 保持专业性和准确性
- 使用Markdown格式化输出

# Tools
- 确保所有工具说明都已更新
- 记录工具使用的最佳实践

# Lessons
- 记录遇到的问题和解决方案
- 保存有用的代码片段和配置

# Scratchpad
- 用于任务规划和进度追踪
- 保持结构化的任务记录
```

### 3. 文件引用规范

在任务执行过程中，使用文件引用的最佳实践：

1. **开始新任务时**
   ```markdown
   # 在对话开始时引用相关文档
   @Cascade-devin-cursorrules项目部署和使用指南.md 
   开始[具体任务]
   ```

2. **查看配置时**
   ```markdown
   # 查看或修改配置
   @.env
   @.cursorrules
   ```

3. **使用工具时**
   ```markdown
   # 使用特定工具前查看说明
   @tools/llm_api.py
   ```

4. **多文件操作时**
   ```markdown
   # 同时引用多个相关文件
   @file1.md @file2.py
   执行相关操作
   ```

### 4. Scratchpad 标准模板

每次开始新任务时，在 `.cursorrules` 的 Scratchpad 部分使用以下模板：

```markdown
## 当前任务：[任务名称]

### 任务分析
- 目标：[具体目标]
- 前置条件：[需要的准备工作]
- 预期结果：[期望达到的效果]

### 任务步骤：
[ ] 1. [第一步]
    - [子任务1]
    - [子任务2]
[ ] 2. [第二步]
    - [子任务1]
    - [子任务2]

### 进度追踪：
- 开始时间：[时间]
- 状态：[进行中/已完成]
- 已完成：[已完成的步骤]
- 下一步：[待执行的任务]
```

## 任务执行流程

### 1. 初始规划阶段

1. **任务分析**
   ```python
   # 在.cursorrules中添加新任务
   [ ] 分析任务需求
   [ ] 确定任务范围
   [ ] 识别关键步骤
   [ ] 评估风险点
   ```

2. **资源检查**
   ```python
   # 检查必要的工具和资源
   [ ] 验证API密钥
   [ ] 检查依赖项
   [ ] 确认权限
   ```

### 2. 执行监控阶段

1. **进度更新**
   ```python
   # 定期更新Scratchpad
   [X] 已完成的任务
   [-] 进行中的任务
   [ ] 待执行的任务
   ```

2. **问题跟踪**
   ```python
   # 记录遇到的问题
   - 问题描述
   - 解决方案
   - 经验总结
   ```

## 工具使用规范

### 1. LLM工具使用流程

```python
# 1. 先明确目的
[ ] 确定查询目标
[ ] 选择合适的模型

# 2. 构造查询
[ ] 使用清晰的提示语
[ ] 包含必要的上下文

# 3. 结果处理
[ ] 验证响应
[ ] 记录有用信息
```

### 2. 搜索和爬取工具使用

```python
# 1. 搜索策略
[ ] 使用精确关键词
[ ] 限制结果范围

# 2. 爬取规范
[ ] 遵守网站规则
[ ] 合理设置并发
```

## 错误处理和改进

### 1. 常见错误处理流程

1. **API错误**
   ```python
   # 处理步骤
   [ ] 检查API密钥
   [ ] 验证请求格式
   [ ] 查看错误日志
   ```

2. **执行错误**
   ```python
   # 修复步骤
   [ ] 分析错误信息
   [ ] 尝试备选方案
   [ ] 更新经验记录
   ```

### 2. 持续改进机制

1. **经验积累**
   ```python
   # 在Lessons中记录
   - 成功经验
   - 失败教训
   - 改进建议
   ```

2. **工具优化**
   ```python
   # 定期更新
   - 工具使用方法
   - 最佳实践
   - 注意事项
   ```

## 实践示例

### 1. 新任务启动示例

```markdown
## 当前任务：部署新的Python服务

### 任务分析
- 目标：部署Flask Web服务
- 前置条件：Python环境、依赖包
- 预期结果：服务正常运行

### 任务步骤：
[ ] 1. 环境准备
    - 创建虚拟环境
    - 安装依赖
[ ] 2. 代码部署
    - 配置服务
    - 启动测试
```

### 2. 问题解决示例

```markdown
## 问题记录

### 1. API调用失败
- 现象：429错误
- 原因：请求频率过高
- 解决：添加请求间隔
- 经验：记录到Lessons

### 2. 依赖冲突
- 现象：版本不兼容
- 解决：更新依赖关系
- 改进：添加版本检查
```

## 核心原则

1. **任务规划先行**
   - 每个任务必须先在Scratchpad中规划
   - 使用标准模板确保完整性
   - 定期更新进度和状态

2. **工具使用规范**
   - 遵循工具使用最佳实践
   - 记录工具使用经验
   - 持续优化使用方法

3. **经验沉淀机制**
   - 及时记录问题和解决方案
   - 更新Lessons保存经验
   - 定期复查改进建议

## 检查清单

### 新任务启动前：
- [ ] Scratchpad模板已填写
- [ ] 任务目标明确定义
- [ ] 步骤详细规划完成
- [ ] 必要工具已准备就绪

### 任务执行中：
- [ ] 定期更新进度
- [ ] 记录问题和解决方案
- [ ] 及时更新Lessons

### 任务完成后：
- [ ] 总结经验教训
- [ ] 更新最佳实践
- [ ] 完善工具使用说明 